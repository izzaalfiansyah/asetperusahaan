import axios from 'axios';

export const http = axios.create({
	baseURL: (window as any).apiURL || 'http://localhost:8000',
});

export const readFile = (file: any, callback: Function) => {
	let reader = new FileReader();
	reader.readAsDataURL(file);
	reader.onload = () => {
		callback(reader.result);
	};
};

export const auth = {
	id: localStorage.getItem('id'),
	role: localStorage.getItem('role'),
};

export const formatMoney = (value: any) => {
	const number = parseInt(value);
	return 'RP ' + number.toLocaleString('id-ID');
};

export const showSnackbar = (message: string, variant: 'success' | 'error' = 'success') => {
	const snackbar = document.createElement('div');
	if (variant == 'success') {
		snackbar.innerHTML = `
		<div class="fixed top-10 right-10 p-5 rounded shadow border-l-4 border-green-500 bg-white text-green-500 lg:min-w-400px flex items-center animate-left">
					<svg
						version="1.1"
						id="Capa_1"
						xmlns="http://www.w3.org/2000/svg"
						x="0px"
						y="0px"
						viewBox="0 0 512 512"
						style="enable-background:new 0 0 512 512;"
						width="30"
						class="mr-4 fill-green-500"
					>
						<g>
							<path
								d="M474.045,173.813c-4.201,1.371-6.494,5.888-5.123,10.088c7.571,23.199,11.411,47.457,11.411,72.1
				c0,62.014-24.149,120.315-68,164.166s-102.153,68-164.167,68s-120.316-24.149-164.167-68S16,318.014,16,256
				S40.149,135.684,84,91.833s102.153-68,164.167-68c32.889,0,64.668,6.734,94.455,20.017c28.781,12.834,54.287,31.108,75.81,54.315
				c3.004,3.239,8.066,3.431,11.306,0.425c3.24-3.004,3.43-8.065,0.426-11.306c-23-24.799-50.26-44.328-81.024-58.047
				C317.287,15.035,283.316,7.833,248.167,7.833c-66.288,0-128.608,25.813-175.48,72.687C25.814,127.392,0,189.712,0,256
				c0,66.287,25.814,128.607,72.687,175.479c46.872,46.873,109.192,72.687,175.48,72.687s128.608-25.813,175.48-72.687
				c46.873-46.872,72.687-109.192,72.687-175.479c0-26.332-4.105-52.26-12.201-77.064
				C482.762,174.736,478.245,172.445,474.045,173.813z"
							/>
							<path
								d="M504.969,83.262c-4.532-4.538-10.563-7.037-16.98-7.037s-12.448,2.499-16.978,7.034l-7.161,7.161
				c-3.124,3.124-3.124,8.189,0,11.313c3.124,3.123,8.19,3.124,11.314-0.001l7.164-7.164c1.51-1.512,3.52-2.344,5.66-2.344
				s4.15,0.832,5.664,2.348c1.514,1.514,2.348,3.524,2.348,5.663s-0.834,4.149-2.348,5.663L217.802,381.75
				c-1.51,1.512-3.52,2.344-5.66,2.344s-4.15-0.832-5.664-2.348L98.747,274.015c-1.514-1.514-2.348-3.524-2.348-5.663
				c0-2.138,0.834-4.149,2.351-5.667c1.51-1.512,3.52-2.344,5.66-2.344s4.15,0.832,5.664,2.348l96.411,96.411
				c1.5,1.5,3.535,2.343,5.657,2.343s4.157-0.843,5.657-2.343l234.849-234.849c3.125-3.125,3.125-8.189,0-11.314
				c-3.124-3.123-8.189-3.123-11.313,0L212.142,342.129l-90.75-90.751c-4.533-4.538-10.563-7.037-16.98-7.037
				s-12.448,2.499-16.978,7.034c-4.536,4.536-7.034,10.565-7.034,16.977c0,6.412,2.498,12.441,7.034,16.978l107.728,107.728
				c4.532,4.538,10.563,7.037,16.98,7.037c6.417,0,12.448-2.499,16.977-7.033l275.847-275.848c4.536-4.536,7.034-10.565,7.034-16.978
				S509.502,87.794,504.969,83.262z"
							/>
						</g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
						<g></g>
					</svg>
					<div>${message}</div>
				</div>
		`;
	} else {
		snackbar.innerHTML = `
			<div class="fixed top-10 right-10 p-5 rounded shadow border-l-4 border-red-500 bg-white text-red-500 lg:min-w-400px flex items-center animate-left">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
	 viewBox="0 0 491.537 491.537" style="enable-background:new 0 0 491.537 491.537;" width="30" class="mr-4 fill-red-500">
<g>
	<g>
		<path d="M488.117,459.466l-223.1-447.2c-10.4-17.4-32-13.1-37.5,0l-225.2,449.3c-8,15.6,6.3,29.2,18.8,29.2h449.6c0,0,0.3,0,0.8,0
			C487.517,490.766,497.017,472.466,488.117,459.466z M54.417,450.066l191.8-383.6l190.8,383.7h-382.6V450.066z"/>
		<path d="M225.417,206.166v104.3c0,11.5,9.4,20.9,20.9,20.9c11.5,0,19.8-8.3,20.9-19.8v-105.4c0-11.5-9.4-20.9-20.9-20.9
			C234.817,185.266,225.417,194.666,225.417,206.166z"/>
		<circle cx="246.217" cy="388.066" r="20.5"/>
	</g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

				<div>${message}</div>
			</div>
		`;
	}
	document.body.appendChild(snackbar);

	setTimeout(() => {
		snackbar.remove();
	}, 3000);
};
